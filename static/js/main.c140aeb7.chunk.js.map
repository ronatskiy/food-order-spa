{"version":3,"sources":["pages/login/components/register-new-account-form.tsx","../node_modules/validatorjs/src/lang sync /^/.*$","components/scroll-to-top.tsx","config/index.ts","components/smart-route.tsx","images/user-logo.svg","components/header/user/user.tsx","components/header/header.tsx","components/footer/footer.tsx","components/loaders/ellipsis-loader.tsx","components/loaders/smart-loader.tsx","components/dev-tools/index.tsx","components/app.tsx","models/time-watcher.ts","vendors/index.ts","utils/date-utils.js","domain/day.ts","models/calendar.ts","domain/dish.ts","domain/dish-category.ts","domain/supplier.ts","domain/day-menu.ts","models/order.ts","models/app.ts","store/page-store.ts","pages/home/store/home-page-store.ts","pages/order/store/order-page-store.ts","pages/week-order/store/week-order-page-store.ts","pages/login/store/form-store-base.js","pages/login/store/store.ts","store/my-order-store.ts","store/identity-store.ts","store/opearation-manager.ts","store/calendar-store.ts","store/app-store.ts","services/menu-service/index.ts","domain/user.ts","services/auth-service/index.ts","services/order-service/index.ts","services/crypto-service/index.ts","services/calendar-service/index.ts","index.tsx","services/index.ts","store/index.ts"],"names":["RegisterNewAccountFormFields","RegisterNewAccountFormSettings","_RegisterNewAccountFo","Object","D_Projects_github_com_food_order_spa_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","name","label","placeholder","rules","RegisterNewAccountForm","observer","_ref","form","nameField","$","nameError","error","nameHasError","Boolean","passwordField","passwordError","passwordHasError","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","reactstrap__WEBPACK_IMPORTED_MODULE_3__","htmlFor","id","assign","bind","invalid","valid","isDirty","type","disabled","isEmpty","isValid","onClick","onSubmit","style","width","map","./ar","./ar.js","./az","./az.js","./be","./be.js","./bg","./bg.js","./bs","./bs.js","./ca","./ca.js","./cs","./cs.js","./cy","./cy.js","./da","./da.js","./de","./de.js","./el","./el.js","./en","./en.js","./es","./es.js","./et","./et.js","./eu","./eu.js","./fa","./fa.js","./fi","./fi.js","./fr","./fr.js","./hr","./hr.js","./hu","./hu.js","./id","./id.js","./it","./it.js","./ja","./ja.js","./ka","./ka.js","./ko","./ko.js","./lt","./lt.js","./lv","./lv.js","./mk","./mk.js","./mn","./mn.js","./ms","./ms.js","./nb_NO","./nb_NO.js","./nl","./nl.js","./pl","./pl.js","./pt","./pt.js","./pt_BR","./pt_BR.js","./ro","./ro.js","./ru","./ru.js","./sl","./sl.js","./sq","./sq.js","./sr","./sr.js","./sv","./sv.js","./tr","./tr.js","./ua","./ua.js","./uk","./uk.js","./vi","./vi.js","./zh","./zh.js","./zh_TW","./zh_TW.js","webpackContext","req","webpackContextResolve","__webpack_require__","e","Error","code","keys","resolve","module","exports","ScrollToTop","prevProps","this","props","location","window","scrollTo","children","React","Component","withRouter","config","isProduction","process","isAuthenticated","REACT_APP_IS_AUTHENTICATED","backendDomain","secret","timeUpdateInterval","Number","SmartRoute","component","_ref$isAuthenticated","_ref$isCurrentUserAdm","isCurrentUserAdmin","_ref$isPrivate","isPrivate","_ref$onlyForAdmins","onlyForAdmins","rest","objectWithoutProperties","react_default","Route","render","Redirect","to","pathname","state","from","_extends","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","user_logo_ref","d","fill","user_logo_SvgComponent","x","y","height","viewBox","User","p","className","Header","inject","appStore","myOrderStore","toggle","action","_this","isOpen","handleLogout","identity","logout","canOrder","concat","reactstrap_es","dark","expand","Link","navbar","nav","inNavbar","caret","header_user_user","currentUser","fullName","right","divider","observable","Footer","EllipsisLoader","operationManager","hasPendingTasks","loaders_ellipsis_loader","DevTools","format","appModel","timeWatcher","currentTime","isOrderAllowed","currentThursday","currentSunday","Home","lazy","then","Order","MyOrder","MyWeekOrder","Login","Promise","all","App","startTimeWatcher","stopTimeWatcher","Fragment","header_header","smart_route","exact","path","react","fallback","footer","smart_loader","components_dev_tools","TimeWatcher","tickInterval","classCallCheck","initializerDefineProperty","time_watcher_descriptor","_descriptor2","interval","setInterval","tick","clearInterval","moment","isoWeekday","set","hour","minute","second","computed","extendedMoment","extendMoment","SHORT_DATE_FORMAT","trimTime","date","millisecond","Day","shortDate","undefined","isHoliday","getDayShortName","CalendarModel","calendarService","calendar_descriptor","getDays","days","runInAction","console","_context","t0","find","nextMonday","add","nextFriday","filter","day","toMoment","isBetween","getNextWeekWorkingDays","Dish","price","_ref$negativeReviews","negativeReviews","_ref$positiveReviews","positiveReviews","DishCategory","dishes","_ref$canMultiSelect","canMultiSelect","dish","Supplier","supplierId","supplierName","availableMoneyToOrder","categories","category","objectSpread","reduce","allDishes","toConsumableArray","DayMenu","suppliers","weekDay","supplier","OrderModel","menuService","orderService","order_descriptor","order_descriptor2","_descriptor3","_descriptor4","orderLunch","asyncToGenerator","regenerator_default","mark","_callee","userOrder","wrap","prev","next","abrupt","stop","_x","getWeekMenu","weekMenuData","weekMenu","wmd","_this2","calendar","getDay","nextWeekMenu","log","_context2","message","getTodayOrders","todayOrders","_this3","_context3","getSharedTodayOrders","sharedTodayOrdersData","_this4","sharedTodayOrders","_context4","userId","getWeekOrders","myOrders","_this5","_context5","AppViewModel","orders","fetchDays","fetchWeekMenu","fetchTodayOrders","fetchSharedTodayOrders","PageStore","HomePageStore","possibleConstructorReturn","getPrototypeOf","OrderPageStore","bound","order_page_store_descriptor","assertThisInitialized","order_page_store_descriptor2","order","user","makeOrder","runWithProgress","_x2","slicedToArray","selectedDay","WeekOrderPageStore","fetchMyOrders","nextWeekWorkingDays","defaultErrorHandler","invalidate","FormStoreBase","fields","onSuccess","onError","options","showErrorsOnChange","validateOnChange","plugins","dvr","validatorjs","hooks","MobxReactForm","LoginFormStore","store_dec","_dec2","store_class","users","store_descriptor","store_descriptor2","store_descriptor3","store_descriptor4","createClass","get","value","selectedOption","applyDecoratedDescriptor","configurable","enumerable","writable","initializer","getOwnPropertyDescriptor","option","_this3$selectedUser","password","selectedUser","login","LoginPageStore","_descriptor5","signInForm","_ref2","_callee2","_form$values","values","signIn","clear","onShowRegisterNewForm","isRegisterNew","loginForm","MyOrderStore","when","IdentityStore","authService","cryptoService","identity_store_descriptor","identity_store_descriptor2","authenticate","auth","fetchAllUsers","getAllUsers","encodePassword","signin","OperationManager","operation","pendingTasksCount","finally","CalendarStore","AppStore","identityStore","init","start","MenuService","api","axios","data","AuthService","domainEndpoint","expiresAt","encryptPassword","post","success","token","jwt","verify","setSession","expiresIn","localStorage","removeItem","sessionToken","getItem","getUserFromSession","Date","getTime","setItem","OrderService","CryptoService","bcrypt","hash","CalendarService","url","configure","enforceActions","apiEndpoint","stores","homePageStore","orderPageStore","weekOrderPageStore","loginPageStore","createStores","rootElement","document","getElementById","ReactDOM","index_module","BrowserRouter","scroll_to_top","app"],"mappings":"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","file":"static/js/main.c140aeb7.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { observer } from \"mobx-react\";\r\nimport { Form, FormFeedback, FormGroup, Input, Label, Button } from \"reactstrap\";\r\n\r\nexport const RegisterNewAccountFormFields = {\r\n\tNAME: \"name\",\r\n\tPASSWORD: \"password\",\r\n};\r\n\r\nexport const RegisterNewAccountFormSettings = {\r\n\t[RegisterNewAccountFormFields.NAME]: {\r\n\t\tname: RegisterNewAccountFormFields.NAME,\r\n\t\tlabel: \"Ваше имя и фамилия\",\r\n\t\tplaceholder: \"Например, John Doe\",\r\n\t\trules: \"required|string|between:3,25\",\r\n\t},\r\n\r\n\t[RegisterNewAccountFormFields.PASSWORD]: {\r\n\t\tname: RegisterNewAccountFormFields.PASSWORD,\r\n\t\tlabel: \"Пароль\",\r\n\t\tplaceholder: \"Например, ******\",\r\n\t\trules: \"required|string|alpha_num|between:5,15\",\r\n\t},\r\n};\r\n\r\nconst RegisterNewAccountForm = observer(({ form }) => {\r\n\tconst nameField = form.$(RegisterNewAccountFormFields.NAME);\r\n\tconst nameError = nameField.error;\r\n\tconst nameHasError = Boolean(nameError);\r\n\r\n\tconst passwordField = form.$(RegisterNewAccountFormFields.PASSWORD);\r\n\tconst passwordError = passwordField.error;\r\n\tconst passwordHasError = Boolean(passwordError);\r\n\r\n\treturn (\r\n\t\t<Form>\r\n\t\t\t<FormGroup>\r\n\t\t\t\t<Label htmlFor={nameField.id}>{nameField.label}</Label>\r\n\t\t\t\t<Input {...nameField.bind()} invalid={nameHasError} valid={nameField.isDirty && !nameHasError} />\r\n\t\t\t\t<FormFeedback valid={!nameHasError}>{nameError}</FormFeedback>\r\n\t\t\t</FormGroup>\r\n\r\n\t\t\t<FormGroup>\r\n\t\t\t\t<Label htmlFor={passwordField.id}>{passwordField.label}</Label>\r\n\t\t\t\t<Input\r\n\t\t\t\t\t{...passwordField.bind({ type: \"password\" })}\r\n\t\t\t\t\tinvalid={passwordHasError}\r\n\t\t\t\t\tvalid={passwordField.isDirty && !passwordHasError}\r\n\t\t\t\t/>\r\n\t\t\t\t<FormFeedback valid={!passwordHasError}>{passwordError}</FormFeedback>\r\n\t\t\t</FormGroup>\r\n\t\t\t<Button\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t\tdisabled={form.isEmpty || !form.isValid}\r\n\t\t\t\tonClick={form.onSubmit}\r\n\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t>\r\n\t\t\t\tСоздать новый аккаунт\r\n\t\t\t</Button>\r\n\t\t</Form>\r\n\t);\r\n});\r\n\r\nexport default RegisterNewAccountForm;","var map = {\n\t\"./ar\": 234,\n\t\"./ar.js\": 234,\n\t\"./az\": 235,\n\t\"./az.js\": 235,\n\t\"./be\": 236,\n\t\"./be.js\": 236,\n\t\"./bg\": 237,\n\t\"./bg.js\": 237,\n\t\"./bs\": 238,\n\t\"./bs.js\": 238,\n\t\"./ca\": 239,\n\t\"./ca.js\": 239,\n\t\"./cs\": 240,\n\t\"./cs.js\": 240,\n\t\"./cy\": 241,\n\t\"./cy.js\": 241,\n\t\"./da\": 242,\n\t\"./da.js\": 242,\n\t\"./de\": 243,\n\t\"./de.js\": 243,\n\t\"./el\": 244,\n\t\"./el.js\": 244,\n\t\"./en\": 152,\n\t\"./en.js\": 152,\n\t\"./es\": 245,\n\t\"./es.js\": 245,\n\t\"./et\": 246,\n\t\"./et.js\": 246,\n\t\"./eu\": 247,\n\t\"./eu.js\": 247,\n\t\"./fa\": 248,\n\t\"./fa.js\": 248,\n\t\"./fi\": 249,\n\t\"./fi.js\": 249,\n\t\"./fr\": 250,\n\t\"./fr.js\": 250,\n\t\"./hr\": 251,\n\t\"./hr.js\": 251,\n\t\"./hu\": 252,\n\t\"./hu.js\": 252,\n\t\"./id\": 253,\n\t\"./id.js\": 253,\n\t\"./it\": 254,\n\t\"./it.js\": 254,\n\t\"./ja\": 255,\n\t\"./ja.js\": 255,\n\t\"./ka\": 256,\n\t\"./ka.js\": 256,\n\t\"./ko\": 257,\n\t\"./ko.js\": 257,\n\t\"./lt\": 258,\n\t\"./lt.js\": 258,\n\t\"./lv\": 259,\n\t\"./lv.js\": 259,\n\t\"./mk\": 260,\n\t\"./mk.js\": 260,\n\t\"./mn\": 261,\n\t\"./mn.js\": 261,\n\t\"./ms\": 262,\n\t\"./ms.js\": 262,\n\t\"./nb_NO\": 263,\n\t\"./nb_NO.js\": 263,\n\t\"./nl\": 264,\n\t\"./nl.js\": 264,\n\t\"./pl\": 265,\n\t\"./pl.js\": 265,\n\t\"./pt\": 266,\n\t\"./pt.js\": 266,\n\t\"./pt_BR\": 267,\n\t\"./pt_BR.js\": 267,\n\t\"./ro\": 268,\n\t\"./ro.js\": 268,\n\t\"./ru\": 269,\n\t\"./ru.js\": 269,\n\t\"./sl\": 270,\n\t\"./sl.js\": 270,\n\t\"./sq\": 271,\n\t\"./sq.js\": 271,\n\t\"./sr\": 272,\n\t\"./sr.js\": 272,\n\t\"./sv\": 273,\n\t\"./sv.js\": 273,\n\t\"./tr\": 274,\n\t\"./tr.js\": 274,\n\t\"./ua\": 275,\n\t\"./ua.js\": 275,\n\t\"./uk\": 276,\n\t\"./uk.js\": 276,\n\t\"./vi\": 277,\n\t\"./vi.js\": 277,\n\t\"./zh\": 278,\n\t\"./zh.js\": 278,\n\t\"./zh_TW\": 279,\n\t\"./zh_TW.js\": 279\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 528;","import React from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\n\r\ninterface Props extends RouteComponentProps<{}> {}\r\n\r\nclass ScrollToTop extends React.Component<Props> {\r\n\tcomponentDidUpdate(prevProps: Props) {\r\n\t\tif (this.props.location !== prevProps.location) {\r\n\t\t\twindow.scrollTo(0, 0);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn this.props.children;\r\n\t}\r\n}\r\n\r\nexport default withRouter(ScrollToTop);\r\n","export const config = {\r\n\tisProduction: process.env.NODE_ENV === \"production\",\r\n\tisAuthenticated: process.env.REACT_APP_IS_AUTHENTICATED === \"true\",\r\n\tbackendDomain: process.env.REACT_APP_BACKEND_DOMAIN || \"\",\r\n\tsecret: process.env.REACT_APP_JWT_SECRET || \"\",\r\n\ttimeUpdateInterval: Number(process.env.REACT_APP_TIME_UPDATE_INTERVAL || 5), // in seconds\r\n};\r\n","import React, { ComponentType } from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\r\n\r\ninterface Props extends RouteProps {\r\n\tcomponent: ComponentType;\r\n\tisAuthenticated?: boolean;\r\n\tisPrivate?: boolean;\r\n\tisCurrentUserAdmin?: boolean;\r\n\tonlyForAdmins?: boolean;\r\n\tpath: string;\r\n}\r\n\r\nconst SmartRoute: React.FC<Props> = ({\r\n\tcomponent: Component,\r\n\tisAuthenticated = false,\r\n\tisCurrentUserAdmin = false,\r\n\tisPrivate = false,\r\n\tonlyForAdmins = false,\r\n\t...rest\r\n}) => {\r\n\treturn (\r\n\t\t<Route\r\n\t\t\t{...rest}\r\n\t\t\trender={props => {\r\n\t\t\t\tif (onlyForAdmins && !isCurrentUserAdmin) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: \"/\",\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isPrivate && !isAuthenticated) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Redirect\r\n\t\t\t\t\t\t\tto={{\r\n\t\t\t\t\t\t\t\tpathname: \"/login\",\r\n\t\t\t\t\t\t\t\tstate: { from: props.location },\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn <Component />;\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default SmartRoute;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from 'react';\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M55,27.5C55,12.337,42.663,0,27.5,0S0,12.337,0,27.5c0,8.009,3.444,15.228,8.926,20.258l-0.026,0.023l0.892,0.752  c0.058,0.049,0.121,0.089,0.179,0.137c0.474,0.393,0.965,0.766,1.465,1.127c0.162,0.117,0.324,0.234,0.489,0.348  c0.534,0.368,1.082,0.717,1.642,1.048c0.122,0.072,0.245,0.142,0.368,0.212c0.613,0.349,1.239,0.678,1.88,0.98  c0.047,0.022,0.095,0.042,0.142,0.064c2.089,0.971,4.319,1.684,6.651,2.105c0.061,0.011,0.122,0.022,0.184,0.033  c0.724,0.125,1.456,0.225,2.197,0.292c0.09,0.008,0.18,0.013,0.271,0.021C25.998,54.961,26.744,55,27.5,55  c0.749,0,1.488-0.039,2.222-0.098c0.093-0.008,0.186-0.013,0.279-0.021c0.735-0.067,1.461-0.164,2.178-0.287  c0.062-0.011,0.125-0.022,0.187-0.034c2.297-0.412,4.495-1.109,6.557-2.055c0.076-0.035,0.153-0.068,0.229-0.104  c0.617-0.29,1.22-0.603,1.811-0.936c0.147-0.083,0.293-0.167,0.439-0.253c0.538-0.317,1.067-0.648,1.581-1  c0.185-0.126,0.366-0.259,0.549-0.391c0.439-0.316,0.87-0.642,1.289-0.983c0.093-0.075,0.193-0.14,0.284-0.217l0.915-0.764  l-0.027-0.023C51.523,42.802,55,35.55,55,27.5z M2,27.5C2,13.439,13.439,2,27.5,2S53,13.439,53,27.5  c0,7.577-3.325,14.389-8.589,19.063c-0.294-0.203-0.59-0.385-0.893-0.537l-8.467-4.233c-0.76-0.38-1.232-1.144-1.232-1.993v-2.957  c0.196-0.242,0.403-0.516,0.617-0.817c1.096-1.548,1.975-3.27,2.616-5.123c1.267-0.602,2.085-1.864,2.085-3.289v-3.545  c0-0.867-0.318-1.708-0.887-2.369v-4.667c0.052-0.519,0.236-3.448-1.883-5.864C34.524,9.065,31.541,8,27.5,8  s-7.024,1.065-8.867,3.168c-2.119,2.416-1.935,5.345-1.883,5.864v4.667c-0.568,0.661-0.887,1.502-0.887,2.369v3.545  c0,1.101,0.494,2.128,1.34,2.821c0.81,3.173,2.477,5.575,3.093,6.389v2.894c0,0.816-0.445,1.566-1.162,1.958l-7.907,4.313  c-0.252,0.137-0.502,0.297-0.752,0.476C5.276,41.792,2,35.022,2,27.5z M42.459,48.132c-0.35,0.254-0.706,0.5-1.067,0.735  c-0.166,0.108-0.331,0.216-0.5,0.321c-0.472,0.292-0.952,0.57-1.442,0.83c-0.108,0.057-0.217,0.111-0.326,0.167  c-1.126,0.577-2.291,1.073-3.488,1.476c-0.042,0.014-0.084,0.029-0.127,0.043c-0.627,0.208-1.262,0.393-1.904,0.552  c-0.002,0-0.004,0.001-0.006,0.001c-0.648,0.16-1.304,0.293-1.964,0.402c-0.018,0.003-0.036,0.007-0.054,0.01  c-0.621,0.101-1.247,0.174-1.875,0.229c-0.111,0.01-0.222,0.017-0.334,0.025C28.751,52.97,28.127,53,27.5,53  c-0.634,0-1.266-0.031-1.895-0.078c-0.109-0.008-0.218-0.015-0.326-0.025c-0.634-0.056-1.265-0.131-1.89-0.233  c-0.028-0.005-0.056-0.01-0.084-0.015c-1.322-0.221-2.623-0.546-3.89-0.971c-0.039-0.013-0.079-0.027-0.118-0.04  c-0.629-0.214-1.251-0.451-1.862-0.713c-0.004-0.002-0.009-0.004-0.013-0.006c-0.578-0.249-1.145-0.525-1.705-0.816  c-0.073-0.038-0.147-0.074-0.219-0.113c-0.511-0.273-1.011-0.568-1.504-0.876c-0.146-0.092-0.291-0.185-0.435-0.279  c-0.454-0.297-0.902-0.606-1.338-0.933c-0.045-0.034-0.088-0.07-0.133-0.104c0.032-0.018,0.064-0.036,0.096-0.054l7.907-4.313  c1.36-0.742,2.205-2.165,2.205-3.714l-0.001-3.602l-0.23-0.278c-0.022-0.025-2.184-2.655-3.001-6.216l-0.091-0.396l-0.341-0.221  c-0.481-0.311-0.769-0.831-0.769-1.392v-3.545c0-0.465,0.197-0.898,0.557-1.223l0.33-0.298v-5.57l-0.009-0.131  c-0.003-0.024-0.298-2.429,1.396-4.36C21.583,10.837,24.061,10,27.5,10c3.426,0,5.896,0.83,7.346,2.466  c1.692,1.911,1.415,4.361,1.413,4.381l-0.009,5.701l0.33,0.298c0.359,0.324,0.557,0.758,0.557,1.223v3.545  c0,0.713-0.485,1.36-1.181,1.575l-0.497,0.153l-0.16,0.495c-0.59,1.833-1.43,3.526-2.496,5.032c-0.262,0.37-0.517,0.698-0.736,0.949  l-0.248,0.283V39.8c0,1.612,0.896,3.062,2.338,3.782l8.467,4.233c0.054,0.027,0.107,0.055,0.16,0.083  C42.677,47.979,42.567,48.054,42.459,48.132z\",\n  fill: \"#FFFFFF\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    x: 0,\n    y: 0,\n    width: 55,\n    height: 55,\n    viewBox: \"0 0 55 55\"\n  }, props), _ref);\n};\n\nexport default __webpack_public_path__ + \"static/media/user-logo.fe2d5a4d.svg\";\nexport { SvgComponent as ReactComponent };","import React from \"react\";\r\n\r\nimport { ReactComponent as UserLogo } from \"../../../images/user-logo.svg\";\r\nimport \"./user.scss\";\r\n\r\ninterface Props {\r\n\tname: string;\r\n}\r\n\r\nconst User: React.FC<Props> = ({ name }) => {\r\n\treturn (\r\n\t\t<div className=\"user\">\r\n\t\t\t<UserLogo className=\"user__logo\" />\r\n\t\t\t<span className=\"user__name\">{name}</span>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default User;\r\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n\tContainer,\n\tNavbar,\n\tNavbarToggler,\n\tCollapse,\n\tNav,\n\tNavItem,\n\tUncontrolledDropdown,\n\tDropdownToggle,\n\tDropdownMenu, DropdownItem\n} from \"reactstrap\";\nimport { observer, inject } from \"mobx-react\";\nimport { action, observable } from \"mobx\";\n\nimport User from \"./user/user\";\nimport AppStore from \"../../store/app-store\";\nimport MyOrderStore from \"../../store/my-order-store\";\nimport \"./header.scss\";\n\ninterface Props {\n\tappStore?: AppStore;\n\tmyOrderStore?: MyOrderStore;\n\tclassName: string;\n}\n\n@inject(({ appStore, myOrderStore }) => ({\n\tappStore: appStore as AppStore,\n\tmyOrderStore: myOrderStore as MyOrderStore,\n}))\n@observer\nclass Header extends React.Component<Props> {\n\t@observable\n\tisOpen: boolean = false;\n\n\ttoggle = action(() => {\n\t\tthis.isOpen = !this.isOpen;\n\t});\n\n\thandleLogout = action(() => {\n\t\tthis.props.appStore!.identity.logout();\n\t});\n\n\trender() {\n\t\tconst { className } = this.props;\n\t\tconst { identity } = this.props.appStore!;\n\t\tconst { canOrder } = this.props.myOrderStore!;\n\n\t\treturn (\n\t\t\t<header className={`header ${className}`}>\n\t\t\t\t<Container className=\"px-0\">\n\t\t\t\t\t<Navbar dark expand=\"md\">\n\t\t\t\t\t\t<Link className=\"navbar-brand\" to=\"/\">\n\t\t\t\t\t\t\tГорячие обеды\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<NavbarToggler onClick={this.toggle} />\n\t\t\t\t\t\t<Collapse isOpen={this.isOpen} navbar>\n\t\t\t\t\t\t\t<Nav className=\"ml-auto mr-auto\" navbar>\n\t\t\t\t\t\t\t\t{canOrder &&\n\t\t\t\t\t\t\t\t\t<NavItem>\n\t\t\t\t\t\t\t\t\t\t<Link className=\"nav-link\" to=\"/order/\">\n\t\t\t\t\t\t\t\t\t\t\tЗаказать обед\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</NavItem>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t<NavItem>\n\t\t\t\t\t\t\t\t\t<Link className=\"nav-link\" to=\"/week-order/\">\n\t\t\t\t\t\t\t\t\t\tЗаказ на неделю\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</NavItem>\n\t\t\t\t\t\t\t\t<NavItem>\n\t\t\t\t\t\t\t\t\t<Link className=\"nav-link\" to=\"/my-order/\">\n\t\t\t\t\t\t\t\t\t\tМой обед\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</NavItem>\n\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t\t<Nav navbar>\n\t\t\t\t\t\t\t\t{!identity.isAuthenticated && (\n\t\t\t\t\t\t\t\t\t<NavItem>\n\t\t\t\t\t\t\t\t\t\t<Link className=\"nav-link\" to=\"/login/\">\n\t\t\t\t\t\t\t\t\t\t\tВход\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</NavItem>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{identity.isAuthenticated && (\n\t\t\t\t\t\t\t\t\t<UncontrolledDropdown nav inNavbar>\n\t\t\t\t\t\t\t\t\t\t<DropdownToggle nav caret>\n\t\t\t\t\t\t\t\t\t\t\t<User name={identity.currentUser!.fullName} />\n\t\t\t\t\t\t\t\t\t\t</DropdownToggle>\n\t\t\t\t\t\t\t\t\t\t<DropdownMenu right>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownItem disabled>\n\t\t\t\t\t\t\t\t\t\t\t\tПрофиль\n\t\t\t\t\t\t\t\t\t\t\t</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t\t<DropdownItem divider />\n\t\t\t\t\t\t\t\t\t\t\t<DropdownItem onClick={this.handleLogout}>\n\t\t\t\t\t\t\t\t\t\t\t\tВыход\n\t\t\t\t\t\t\t\t\t\t\t</DropdownItem>\n\t\t\t\t\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t\t\t\t\t</UncontrolledDropdown>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Nav>\n\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t</Navbar>\n\t\t\t\t</Container>\n\t\t\t</header>\n\t\t);\n\t}\n}\n\nexport default Header;\n","import React from \"react\";\r\nimport { Container } from \"reactstrap\";\r\n\r\ninterface Props {\r\n\tclassName: string;\r\n}\r\n\r\nconst Footer = ({ className }: Props) => {\r\n\treturn (\r\n\t\t<footer className={`footer ${className}`}>\r\n\t\t\t<Container>&copy; 2018 Murano Hackathon Food order group</Container>\r\n\t\t</footer>\r\n\t);\r\n};\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nimport \"./ellipsis-loader.scss\";\r\n\r\nfunction EllipsisLoader() {\r\n\treturn (\r\n\t\t<div className=\"ellipsis-loader-overlay\">\r\n\t\t\t<div className=\"ellipsis-loader-wrapper\">\r\n\t\t\t\t<div className=\"ellipsis-loader\">\r\n\t\t\t\t\t<div className=\"ellipsis-loader__circle ellipsis-loader__circle--1\" />\r\n\t\t\t\t\t<div className=\"ellipsis-loader__circle ellipsis-loader__circle--2\" />\r\n\t\t\t\t\t<div className=\"ellipsis-loader__circle ellipsis-loader__circle--3\" />\r\n\t\t\t\t\t<div className=\"ellipsis-loader__circle ellipsis-loader__circle--4\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default EllipsisLoader;\r\n","import React from \"react\";\r\nimport { inject, observer } from \"mobx-react\";\r\n\r\nimport Loader from \"./ellipsis-loader\";\r\nimport AppStore from \"../../store/app-store\";\r\n\r\ninterface Props {\r\n\tappStore?: AppStore;\r\n}\r\n\r\nfunction SmartLoader({ appStore }: Props) {\r\n\tconst { hasPendingTasks } = appStore!.operationManager;\r\n\r\n\treturn hasPendingTasks ? <Loader /> : null;\r\n}\r\n\r\nexport default inject(\"appStore\")(observer(SmartLoader));\r\n","import React from \"react\";\r\nimport { inject, observer } from \"mobx-react\";\r\n\r\nimport AppStore from \"../../store/app-store\";\r\nimport \"./index.scss\";\r\n\r\ninterface Props {\r\n\tappStore?: AppStore;\r\n}\r\n\r\n@inject(\"appStore\")\r\n@observer\r\nclass DevTools extends React.Component<Props> {\r\n\trender() {\r\n\t\tconst { appStore } = this.props;\r\n\t\tconst format = \"DD-MMM-YYYY HH:mm:ss ddd\";\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"dev-tools\">\r\n\t\t\t\t<div>Time (UTC): {appStore!.appModel.timeWatcher.currentTime.format(format)}</div>\r\n\t\t\t\t<div>Order {appStore!.isOrderAllowed ? \"is\" : \"is not\"} allowed</div>\r\n\t\t\t\t<div>{appStore!.appModel.timeWatcher.currentThursday.format(format)}</div>\r\n\t\t\t\t<div>{appStore!.appModel.timeWatcher.currentSunday.format(format)}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default DevTools;\r\n","import React, { Component, Suspense } from \"react\";\nimport { Container } from \"reactstrap\";\nimport { withRouter, RouteComponentProps } from \"react-router-dom\";\nimport { inject, observer } from \"mobx-react\";\n\nimport { config } from \"../config\";\nimport Route from \"./smart-route\";\nimport Header from \"./header/header\";\nimport Footer from \"./footer/footer\";\nimport SmartLoader from \"./loaders/smart-loader\";\nimport Loader from \"./loaders/ellipsis-loader\";\n\nimport AppStore from \"../store/app-store\";\nimport DevTools from \"./dev-tools\";\n\nconst Home = React.lazy(() => import(\"../pages/home/index\"));\nconst Order = React.lazy(() => import(\"../pages/order/index\"));\nconst MyOrder = React.lazy(() => import(\"../pages/my-order/index\"));\nconst MyWeekOrder = React.lazy(() => import(\"../pages/week-order/index\"));\nconst Login = React.lazy(() => import(\"../pages/login/index\"));\n\ninterface Props extends RouteComponentProps {\n\tappStore?: AppStore;\n}\n\nclass App extends Component<Props> {\n\tcomponentDidMount() {\n\t\tthis.props.appStore!.startTimeWatcher();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.props.appStore!.stopTimeWatcher();\n\t}\n\n\trender() {\n\t\tconst { appStore } = this.props;\n\t\tconst { isAuthenticated } = appStore!.identity;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Header className=\"layout__header fixed-top\"/>\n\t\t\t\t<main className=\"layout__main\">\n\t\t\t\t\t<Container>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\tpath=\"/\"\n\t\t\t\t\t\t\tcomponent={() => (\n\t\t\t\t\t\t\t\t<Suspense fallback={<Loader/>}>\n\t\t\t\t\t\t\t\t\t<Home/>\n\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/order/\"\n\t\t\t\t\t\t\tisPrivate\n\t\t\t\t\t\t\tisAuthenticated={isAuthenticated}\n\t\t\t\t\t\t\tcomponent={() => (\n\t\t\t\t\t\t\t\t<Suspense fallback={<Loader/>}>\n\t\t\t\t\t\t\t\t\t<Order/>\n\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/my-order/\"\n\t\t\t\t\t\t\tisPrivate\n\t\t\t\t\t\t\tisAuthenticated={isAuthenticated}\n\t\t\t\t\t\t\tcomponent={() => (\n\t\t\t\t\t\t\t\t<Suspense fallback={<Loader/>}>\n\t\t\t\t\t\t\t\t\t<MyOrder/>\n\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/week-order/\"\n\t\t\t\t\t\t\tisPrivate\n\t\t\t\t\t\t\tisAuthenticated={isAuthenticated}\n\t\t\t\t\t\t\tcomponent={() => (\n\t\t\t\t\t\t\t\t<Suspense fallback={<Loader/>}>\n\t\t\t\t\t\t\t\t\t<MyWeekOrder/>\n\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\tpath=\"/login/\"\n\t\t\t\t\t\t\tcomponent={() => (\n\t\t\t\t\t\t\t\t<Suspense fallback={<Loader/>}>\n\t\t\t\t\t\t\t\t\t<Login/>\n\t\t\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Container>\n\t\t\t\t</main>\n\t\t\t\t<Footer className=\"layout__footer\"/>\n\t\t\t\t<SmartLoader/>\n\t\t\t\t{!config.isProduction && <DevTools />}\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default inject(\"appStore\")(withRouter(observer(App)));\n","import moment, { Moment } from \"moment\";\r\nimport { action, computed, observable } from \"mobx\";\r\n\r\nexport default class TimeWatcher {\r\n\tprivate interval: any;\r\n\r\n\tconstructor(private readonly tickInterval: number) {}\r\n\r\n\t@observable\r\n\tpublic currentTime: Moment = moment();\r\n\r\n\tstart() {\r\n\t\tthis.interval = setInterval(this.tick, 1000 * this.tickInterval);\r\n\t\tthis.tick();\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.interval && clearInterval(this.interval);\r\n\t}\r\n\r\n\t@action\r\n\ttick = () => {\r\n\t\tthis.currentTime = moment();\r\n\t};\r\n\r\n\t@computed\r\n\tget currentThursday() {\r\n\t\treturn moment(this.currentTime).isoWeekday(4).set({ hour: 16, minute: 0, second: 0 });\r\n\t}\r\n\r\n\t@computed\r\n\tget currentSunday() {\r\n\t\treturn moment(this.currentTime).isoWeekday(7).set({ hour: 12, minute: 0, second: 0 });\r\n\t}\r\n}\r\n","import \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport moment from \"moment\";\r\nimport { extendMoment } from \"moment-range\";\r\n\r\n// @ts-ignore\r\nconst extendedMoment = extendMoment(moment);\r\n\r\nexport { extendedMoment as moment };\r\n","import { moment } from \"../vendors\";\r\n\r\nconst SHORT_DATE_FORMAT = \"L\"; // \"MM/DD/YYYY\";\r\n\r\nfunction trimTime(date) {\r\n\treturn moment(date).set({ hour: 0, minute: 0, second: 0, millisecond: 0 });\r\n}\r\n\r\nexport function toShortDate(date) {\r\n\treturn moment(date).format(SHORT_DATE_FORMAT);\r\n}\r\n\r\nexport function fromShortDate(shortDate) {\r\n\treturn trimTime(moment(shortDate, SHORT_DATE_FORMAT));\r\n}\r\n\r\nexport function getDayShortName(date, format = SHORT_DATE_FORMAT) {\r\n\treturn moment(date, format).format(\"ddd\");\r\n}\r\n\r\nexport function getNextWeekWorkingDays(days) {\r\n\tconst nextMonday = trimTime(\r\n\t\tmoment()\r\n\t\t\t.add(1, \"weeks\")\r\n\t\t\t.isoWeekday(\"Monday\"),\r\n\t);\r\n\tconst nextFriday = trimTime(\r\n\t\tmoment()\r\n\t\t\t.add(1, \"weeks\")\r\n\t\t\t.isoWeekday(\"Friday\"),\r\n\t);\r\n\r\n\treturn days.filter(day => day.toMoment().isBetween(nextMonday, nextFriday, null, \"[]\"));\r\n}\r\n","import { getDayShortName, fromShortDate } from \"../utils/date-utils\";\r\n\r\nclass Day {\r\n\tconstructor(\r\n\t\tpublic shortDate: string = \"\",\r\n\t\tpublic isHoliday: boolean = false) {\r\n\t}\r\n\r\n\tpublic get shortName() {\r\n\t\treturn getDayShortName(this.shortDate)\r\n\t}\r\n\r\n\tpublic toMoment() {\r\n\t\treturn fromShortDate(this.shortDate);\r\n\t}\r\n}\r\n\r\nexport default Day;\r\n","import { action, computed, observable, runInAction } from \"mobx\";\r\n\r\nimport Day from \"../domain/day\";\r\nimport CalendarService from \"../services/calendar-service\";\r\nimport { getNextWeekWorkingDays } from \"../utils/date-utils\";\r\n\r\nclass CalendarModel {\r\n\tconstructor(private calendarService: CalendarService) {}\r\n\r\n\t@observable\r\n\tpublic days: Day[] = [];\r\n\r\n\t@computed\r\n\tget nextWeekWorkingDays() {\r\n\t\treturn getNextWeekWorkingDays(this.days);\r\n\t}\r\n\r\n\t@action\r\n\tpublic async fetchDays() {\r\n\t\ttry {\r\n\t\t\tconst days = await this.calendarService.getDays();\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.days = days.map(d => new Day(d.shortDate, d.isHoliday));\r\n\t\t\t})\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n\r\n\tpublic getDay(shortDate: string) {\r\n\t\treturn this.days.find(d => d.shortDate === shortDate);\r\n\t}\r\n}\r\n\r\nexport default CalendarModel;\r\n","import { DishDto } from \"./dto\";\r\n\r\nclass Dish {\r\n\tpublic id: string;\r\n\tpublic name: string;\r\n\tpublic price: number;\r\n\tpublic positiveReviews: number;\r\n\tpublic negativeReviews: number;\r\n\r\n\tconstructor({ id, name, price, negativeReviews = 0, positiveReviews = 0 }: DishDto) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.price = price;\r\n\t\tthis.positiveReviews = positiveReviews;\r\n\t\tthis.negativeReviews = negativeReviews;\r\n\t}\r\n\r\n\tpublic get rating() {\r\n\t\treturn this.positiveReviews - this.negativeReviews;\r\n\t}\r\n}\r\n\r\nexport default Dish;\r\n","import Dish from \"./dish\";\r\nimport { DishCategoryDto } from \"./dto\";\r\n\r\nclass DishCategory {\r\n\tpublic id: string;\r\n\tpublic name: string;\r\n\tpublic canMultiSelect: boolean;\r\n\tpublic dishes: Dish[];\r\n\r\n\tconstructor({ id, name, dishes, canMultiSelect = false }: DishCategoryDto) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.canMultiSelect = canMultiSelect;\r\n\t\tthis.dishes = dishes.map(dish => new Dish(dish));\r\n\t}\r\n}\r\n\r\nexport default DishCategory;\r\n","import DishCategory from \"./dish-category\";\r\nimport Dish from \"./dish\";\r\nimport { SupplierDto } from \"./dto\";\r\n\r\nclass Supplier {\r\n\tpublic id: string;\r\n\tpublic name: string;\r\n\tpublic availableMoneyToOrder: number;\r\n\tpublic categories: DishCategory[];\r\n\r\n\tconstructor({ supplierId, supplierName, availableMoneyToOrder, canMultiSelect = true, categories }: SupplierDto) {\r\n\t\tthis.id = supplierId;\r\n\t\tthis.name = supplierName;\r\n\t\tthis.availableMoneyToOrder = availableMoneyToOrder;\r\n\t\tthis.categories = categories.map(category => new DishCategory({ ...category, canMultiSelect }));\r\n\t}\r\n\r\n\tget allDishes() {\r\n\t\treturn this.categories.reduce((allDishes: Dish[], category) => {\r\n\t\t\treturn [...allDishes, ...category.dishes];\r\n\t\t}, []);\r\n\t}\r\n}\r\n\r\nexport default Supplier;\r\n","import Supplier from \"./supplier\";\r\nimport Day from \"./day\";\r\n\r\nclass DayMenu {\r\n\tpublic weekDay: Day;\r\n\tpublic suppliers: Supplier[];\r\n\r\n\tconstructor(day: Day, suppliers: []) {\r\n\t\tthis.weekDay = day;\r\n\t\tthis.suppliers = suppliers.map(supplier => new Supplier(supplier));\r\n\t}\r\n}\r\n\r\nexport default DayMenu;\r\n","import { observable, runInAction } from \"mobx\";\r\n\r\nimport DayMenu from \"../domain/day-menu\";\r\nimport UserOrder from \"../domain/user-order\";\r\nimport { DayMenuDto } from \"../domain/dto\";\r\nimport OrderService from \"../services/order-service\";\r\nimport Day from \"../domain/day\";\r\nimport AppViewModel from \"./app\";\r\nimport MenuService from \"../services/menu-service\";\r\n\r\nclass OrderModel {\r\n\tconstructor(private menuService: MenuService, private orderService: OrderService, private appModel: AppViewModel) {}\r\n\r\n\t@observable\r\n\tpublic nextWeekMenu: DayMenu[] = [];\r\n\t@observable\r\n\tpublic todayOrders: UserOrder[] = [];\r\n\t@observable\r\n\tpublic sharedTodayOrders: UserOrder[] = [];\r\n\t@observable\r\n\tpublic myOrders: UserOrder[] = [];\r\n\r\n\tpublic orderLunch = async (userOrder: UserOrder) => {\r\n\t\treturn this.orderService.orderLunch(userOrder);\r\n\t};\r\n\r\n\tpublic async fetchWeekMenu() {\r\n\t\ttry {\r\n\t\t\tconst weekMenuData = await this.menuService.getWeekMenu();\r\n\t\t\tconst weekMenu = weekMenuData.map((wmd: DayMenuDto) => {\r\n\t\t\t\tconst day = this.appModel.calendar.getDay(wmd.shortDate) || new Day(wmd.shortDate);\r\n\t\t\t\treturn new DayMenu(day, wmd.suppliers);\r\n\t\t\t});\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.nextWeekMenu = weekMenu;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async fetchTodayOrders() {\r\n\t\ttry {\r\n\t\t\tlet todayOrders = await this.orderService.getTodayOrders();\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.todayOrders = todayOrders;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async fetchSharedTodayOrders() {\r\n\t\ttry {\r\n\t\t\tlet sharedTodayOrdersData = await this.orderService.getSharedTodayOrders();\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.sharedTodayOrders = sharedTodayOrdersData;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async fetchMyOrders(userId: string | null) {\r\n\t\ttry {\r\n\t\t\tlet myOrders = await this.orderService.getWeekOrders(userId);\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.myOrders = myOrders;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.message);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default OrderModel;","import { computed } from \"mobx\";\r\n\r\nimport TimeWatcher from \"./time-watcher\";\r\nimport { config } from \"../config\";\r\nimport CalendarService from \"../services/calendar-service\";\r\nimport CalendarModel from \"./calendar\";\r\nimport OrderModel from \"./order\";\r\nimport MenuService from \"../services/menu-service\";\r\nimport OrderService from \"../services/order-service\";\r\n\r\ninterface Params {\r\n\tcalendarService: CalendarService;\r\n\tmenuService: MenuService;\r\n\torderService: OrderService;\r\n}\r\n\r\nclass AppViewModel {\r\n\tconstructor({ calendarService, menuService, orderService }: Params) {\r\n\t\tthis.timeWatcher = new TimeWatcher(config.timeUpdateInterval);\r\n\t\tthis.calendar = new CalendarModel(calendarService);\r\n\t\tthis.orders = new OrderModel(menuService, orderService, this);\r\n\t}\r\n\r\n\tpublic timeWatcher: TimeWatcher;\r\n\tpublic calendar: CalendarModel;\r\n\tpublic orders: OrderModel;\r\n\r\n\tpublic async init() {\r\n\t\tawait this.calendar.fetchDays();\r\n\r\n\t\treturn Promise.all([\r\n\t\t\tthis.orders.fetchWeekMenu(),\r\n\t\t\tthis.orders.fetchTodayOrders(),\r\n\t\t\tthis.orders.fetchSharedTodayOrders(),\r\n\t\t])\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get isOrderAllowed() {\r\n\t\treturn this.timeWatcher.currentTime.isBetween(this.timeWatcher.currentThursday, this.timeWatcher.currentSunday);\r\n\t}\r\n}\r\n\r\nexport default AppViewModel\r\n","import AppStore from \"./app-store\";\r\n\r\nexport default class PageStore {\r\n\tconstructor(public appStore: AppStore) {}\r\n}","import { computed } from \"mobx\";\r\n\r\nimport AppStore from \"../../../store/app-store\";\r\nimport PageStore from \"../../../store/page-store\";\r\nimport AppViewModel from \"../../../models/app\";\r\n\r\nclass HomePageStore extends PageStore {\r\n\tconstructor(appStore: AppStore, private appModel: AppViewModel) {\r\n\t\tsuper(appStore);\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get todayOrders() {\r\n\t\treturn this.appModel.orders.todayOrders;\r\n\t};\r\n\r\n\t@computed\r\n\tpublic get sharedTodayOrders() {\r\n\t\treturn this.appModel.orders.sharedTodayOrders;\r\n\t};\r\n}\r\n\r\nexport default HomePageStore;\r\n","import { action, computed, observable } from \"mobx\";\r\n\r\nimport AppViewModel from \"../../../models/app\";\r\nimport AppStore from \"../../../store/app-store\";\r\nimport DayMenu from \"../../../domain/day-menu\";\r\nimport Order from \"../../../domain/order\";\r\nimport Day from \"../../../domain/day\";\r\nimport PageStore from \"../../../store/page-store\";\r\n\r\nclass OrderPageStore extends PageStore {\r\n\tconstructor(appStore: AppStore, private appModel: AppViewModel) {\r\n\t\tsuper(appStore);\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get nextWeekMenu(): DayMenu[] {\r\n\t\treturn this.appModel.orders.nextWeekMenu;\r\n\t};\r\n\r\n\t@computed\r\n\tpublic get myOrders() {\r\n\t\treturn this.appModel.orders.myOrders;\r\n\t}\r\n\r\n\t@observable\r\n\tpublic selectedDay: Day | null = null;\r\n\r\n\t@action.bound\r\n\tpublic switchDay = (day: Day) => {\r\n\t\tif (this.selectedDay !== day) {\r\n\t\t\tthis.selectedDay = day;\r\n\t\t}\r\n\t};\r\n\r\n\t@computed\r\n\tget activeDay() {\r\n\t\tlet weekDay = null;\r\n\t\tif (this.appModel.orders.nextWeekMenu.length > 0) {\r\n\t\t\t[{ weekDay }] = this.appModel.orders.nextWeekMenu;\r\n\t\t}\r\n\r\n\t\treturn this.selectedDay || weekDay\r\n\t}\r\n\r\n\tpublic orderLunch = async (day: Day, order: Order) => {\r\n\t\tif(!this.appStore.identity.isAuthenticated) {\r\n\t\t\tthrow new Error(\"User must be authenticated to perform this operation\");\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst user = this.appStore.identity.currentUser!;\r\n\t\t\tconst makeOrder = () => this.appModel.orders.orderLunch( {\r\n\t\t\t\tday,\r\n\t\t\t\tuser,\r\n\t\t\t\torder,\r\n\t\t\t});\r\n\r\n\t\t\tawait this.appStore.operationManager.runWithProgress(makeOrder);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.message);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport default OrderPageStore;","import { action, computed } from \"mobx\";\r\n\r\nimport AppViewModel from \"../../../models/app\";\r\nimport PageStore from \"../../../store/page-store\";\r\nimport AppStore from \"../../../store/app-store\";\r\n\r\nexport default class WeekOrderPageStore extends PageStore {\r\n\tconstructor(appStore: AppStore, private appModel: AppViewModel) {\r\n\t\tsuper(appStore);\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get orders() {\r\n\t\treturn this.appModel.orders.myOrders;\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get nextWeekWorkingDays() {\r\n\t\treturn this.appModel.calendar.nextWeekWorkingDays;\r\n\t}\r\n\r\n\t@action\r\n\tpublic async fetchOrders() {\r\n\t\tconst userId = this.appStore.identity.isAuthenticated ? this.appStore.identity.currentUser!.id : null;\r\n\t\tthis.appStore.operationManager.runWithProgress(() => this.appModel.orders.fetchMyOrders(userId));\r\n\t}\r\n}\r\n","import MobxReactForm from \"mobx-react-form\";\r\nimport validatorjs from \"validatorjs\";\r\n\r\nexport const defaultErrorHandler = form => {\r\n\t// invalidate the form with a custom error message\r\n\tform.invalidate(\"This is a generic error message!\");\r\n};\r\n\r\nclass FormStoreBase extends MobxReactForm {\r\n\tconstructor(fields, onSuccess, onError = defaultErrorHandler) {\r\n\t\tsuper(\r\n\t\t\t{ fields },\r\n\t\t\t{\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tshowErrorsOnChange: true,\r\n\t\t\t\t\tvalidateOnChange: true,\r\n\t\t\t\t},\r\n\t\t\t\tplugins: {\r\n\t\t\t\t\tdvr: validatorjs,\r\n\t\t\t\t},\r\n\t\t\t\thooks: {\r\n\t\t\t\t\tonSuccess,\r\n\t\t\t\t\tonError,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FormStoreBase;\r\n","import { action, computed, observable } from \"mobx\";\r\n\r\nimport AppStore from \"../../../store/app-store\";\r\nimport PageStore from \"../../../store/page-store\";\r\nimport FormStoreBase from \"./form-store-base\";\r\nimport { RegisterNewAccountFormSettings } from \"../components/register-new-account-form\";\r\nimport { UserDto } from \"../../../domain/dto\";\r\n\r\ninterface Option {\r\n\tlabel: string;\r\n\tvalue: string;\r\n}\r\n\r\nexport class LoginFormStore {\r\n\tconstructor(private readonly users: UserDto[], private readonly appStore: AppStore) {}\r\n\r\n\t@observable\r\n\tselectedUserId: string | null = null;\r\n\r\n\t@observable\r\n\tselectedOption: Option | null = null;\r\n\r\n\t@computed\r\n\tpublic get options() {\r\n\t\treturn this.users.map(user => ({\r\n\t\t\tlabel: user.name,\r\n\t\t\tvalue: user.id,\r\n\t\t}));\r\n\t}\r\n\r\n\t@computed\r\n\tget selectedUser() {\r\n\t\tif (!this.selectedOption) {\r\n\t\t\treturn null\r\n\t\t}\r\n\r\n\t\treturn this.users.find(user => user.id === this.selectedOption!.value) || null;\r\n\t}\r\n\r\n\t@action.bound\r\n\tonChange = (option: any) => {\r\n\t\tthis.selectedOption = option;\r\n\t};\r\n\r\n\t@action.bound\r\n\tonSubmit = async () => {\r\n\t\tif (this.selectedUser) {\r\n\t\t\tconst { name, password } = this.selectedUser;\r\n\t\t\tawait this.appStore.operationManager.runWithProgress(() => {\r\n\t\t\t\treturn this.appStore.identity.login(name, password)\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n}\r\n\r\nclass LoginPageStore extends PageStore {\r\n\t@observable\r\n\tpublic signInForm: FormStoreBase;\r\n\tconstructor(appStore: AppStore) {\r\n\t\tsuper(appStore);\r\n\r\n\t\tthis.signInForm = new FormStoreBase(RegisterNewAccountFormSettings, async (form: any) => {\r\n\t\t\tconst { name, password } = form.values();\r\n\r\n\t\t\tawait this.appStore.operationManager.runWithProgress(() => {\r\n\t\t\t\treturn appStore.identity.signIn(name, password);\r\n\t\t\t});\r\n\r\n\t\t\tform.clear();\r\n\t\t\tthis.onShowRegisterNewForm()\r\n\t\t});\r\n\t}\r\n\r\n\t@computed\r\n\tget isAuthenticated() {\r\n\t\treturn this.appStore.identity.isAuthenticated;\r\n\t};\r\n\r\n\t@observable\r\n\tisRegisterNew = false;\r\n\r\n\t@action.bound\r\n\tonShowRegisterNewForm() {\r\n\t\tthis.isRegisterNew = !this.isRegisterNew;\r\n\t};\r\n\r\n\t@computed\r\n\tpublic get loginForm() {\r\n\t\tconst { users } = this.appStore.identity;\r\n\r\n\t\tif(users.length > 0) {\r\n\t\t\treturn new LoginFormStore(users, this.appStore);\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\t@computed\r\n\tpublic get showLoginForm() {\r\n\t\treturn !this.isRegisterNew && this.loginForm !== null;\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get showSignInForm() {\r\n\t\treturn this.isRegisterNew;\r\n\t}\r\n}\r\n\r\nexport default LoginPageStore;\r\n","import { computed, when } from \"mobx\";\r\n\r\nimport AppViewModel from \"../models/app\";\r\nimport AppStore from \"./app-store\";\r\n\r\nclass MyOrderStore {\r\n\tconstructor(public appModel: AppViewModel, public appStore: AppStore) {\r\n\t\twhen(() => this.appStore.identity.isAuthenticated, () => {\r\n\t\t\tthis.appModel.orders.fetchMyOrders(this.appStore.identity.currentUser!.id)\r\n\t\t})\r\n\t}\r\n\r\n\t@computed\r\n\tpublic get canOrder() {\r\n\t\treturn this.appModel.isOrderAllowed;\r\n\t}\r\n}\r\n\r\nexport default MyOrderStore;\r\n","import { observable, action, computed, runInAction } from \"mobx\";\r\n\r\nimport { UserDto } from \"../domain/dto\";\r\nimport User from \"../domain/user\";\r\nimport AuthService from \"../services/auth-service\";\r\nimport CryptoService from \"../services/crypto-service\";\r\n\r\nclass IdentityStore {\r\n\tconstructor(private readonly authService: AuthService, private readonly cryptoService: CryptoService) {\r\n\t\tconst user = authService.authenticate();\r\n\r\n\t\tthis.auth(user);\r\n\t\tthis.fetchAllUsers();\r\n\t}\r\n\r\n\t@observable\r\n\tpublic users: UserDto[] = [];\r\n\r\n\t@action\r\n\tprivate async fetchAllUsers() {\r\n\t\ttry {\r\n\t\t\tlet users = await this.authService.getAllUsers();\r\n\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.users = users;\r\n\t\t\t});\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e.message);\r\n\t\t}\r\n\t}\r\n\r\n\t@observable\r\n\tpublic currentUser: User | null = null;\r\n\r\n\t@computed\r\n\tpublic get isAuthenticated() {\r\n\t\treturn this.currentUser !== null;\r\n\t};\r\n\r\n\t@action\r\n\tpublic async login(name: string, password: string) {\r\n\t\tconst user = await this.authService.login(name, password);\r\n\r\n\t\treturn this.auth(user);\r\n\t}\r\n\r\n\t@action\r\n\tpublic async signIn(name: string, password: string) {\r\n\t\tpassword = await this.cryptoService.encodePassword(password);\r\n\t\tconst user = await this.authService.signin(name, password);\r\n\r\n\t\treturn this.auth(user);\r\n\t}\r\n\r\n\t@action\r\n\tpublic logout() {\r\n\t\tthis.authService.logout();\r\n\t\tthis.currentUser = null;\r\n\t}\r\n\r\n\t@action\r\n\tprivate auth(user: User | null) {\r\n\t\tthis.currentUser = user;\r\n\t}\r\n}\r\n\r\nexport default IdentityStore;\r\n","import { observable, action, runInAction, computed } from \"mobx\";\r\n\r\nexport default class OperationManager {\r\n\t@observable\r\n\tpendingTasksCount: number = 0;\r\n\r\n\t@computed\r\n\tget hasPendingTasks() {\r\n\t\treturn this.pendingTasksCount > 0;\r\n\t}\r\n\r\n\t@action\r\n\tasync runWithProgress<T>(operation: () => Promise<T>) {\r\n\t\tthis.pendingTasksCount++;\r\n\r\n\t\treturn operation().finally(() => {\r\n\t\t\trunInAction(() => {\r\n\t\t\t\tthis.pendingTasksCount--;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n","import { computed } from \"mobx\";\r\n\r\nimport AppViewModel from \"../models/app\";\r\n\r\nclass CalendarStore {\r\n\tconstructor(private appModel: AppViewModel) {}\r\n\r\n\t@computed\r\n\tpublic get days() {\r\n\t\treturn this.appModel.calendar.days;\r\n\t}\r\n}\r\n\r\nexport default CalendarStore;\r\n","import { computed } from \"mobx\";\r\n\r\nimport OperationManager from \"./opearation-manager\";\r\nimport IdentityStore from \"./identity-store\";\r\nimport CalendarStore from \"./calendar-store\";\r\nimport AppViewModel from \"../models/app\";\r\n\r\ninterface Params {\r\n\tappModel: AppViewModel;\r\n\tidentityStore: IdentityStore;\r\n}\r\n\r\nexport default class AppStore {\r\n\tconstructor({ appModel, identityStore }: Params ) {\r\n\t\tthis.appModel = appModel;\r\n\t\tthis.calendar = new CalendarStore(appModel);\r\n\t\tthis.identity = identityStore;\r\n\t\tthis.operationManager = new OperationManager();\r\n\r\n\t\tthis.operationManager.runWithProgress(() => this.appModel.init())\r\n\t}\r\n\r\n\tpublic appModel: AppViewModel;\r\n\tpublic identity: IdentityStore;\r\n\tpublic calendar: CalendarStore;\r\n\tpublic operationManager: OperationManager;\r\n\r\n\t@computed\r\n\tpublic get isLoading() {\r\n\t\treturn this.operationManager.hasPendingTasks;\r\n\t};\r\n\r\n\t@computed\r\n\tpublic get isOrderAllowed() {\r\n\t\treturn this.appModel.isOrderAllowed;\r\n\t};\r\n\r\n\tstartTimeWatcher() {\r\n\t\tthis.appModel.timeWatcher.start();\r\n\t}\r\n\r\n\tstopTimeWatcher() {\r\n\t\tthis.appModel.timeWatcher.stop();\r\n\t}\r\n}","import axios from \"axios\";\r\nimport { DayMenuDto } from \"../../domain/dto\";\r\n\r\nexport default class MenuService {\r\n\tprivate api: string;\r\n\r\n\tconstructor(api: string) {\r\n\t\tthis.api = `${api}/menu/week-menu/`;\r\n\t}\r\n\r\n\tpublic async getWeekMenu(): Promise<DayMenuDto[]> {\r\n\t\treturn (await axios.get(this.api)).data;\r\n\t}\r\n}","export default class User {\r\n\tconstructor(\r\n\t\tpublic fullName: string = \"\",\r\n\t\tpublic id: string = \"\") {\r\n\t}\r\n}","import axios from \"axios\";\r\nimport jwt from \"jsonwebtoken\";\r\n\r\nimport User from \"../../domain/user\";\r\nimport { config } from \"../../config\";\r\n\r\ninterface AuthResponce {\r\n\tsuccess: boolean;\r\n\ttoken: string;\r\n\tmessage: string;\r\n}\r\n\r\ninterface UserDto {\r\n\tid: string;\r\n\tname: string;\r\n\texpiresIn: number;\r\n}\r\n\r\nconst LOCAL_STORAGE_KEY = \"food-order-session\";\r\n\r\nexport default class AuthService {\r\n\tprivate readonly domainEndpoint: string = config.backendDomain;\r\n\tprivate expiresAt: number = 0;\r\n\r\n\tpublic get isAuthenticated() {\r\n\t\treturn new Date().getTime() < this.expiresAt;\r\n\t}\r\n\r\n\tpublic async login(name: string, password: string) {\r\n\t\tpassword = this.encryptPassword(password);\r\n\r\n\t\ttry {\r\n\t\t\tconst { success, token }: AuthResponce = (await axios.post(`${this.domainEndpoint}/login`, { name, password })).data;\r\n\r\n\t\t\tif ( success ) {\r\n\t\t\t\tlet user: UserDto | null = null;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuser = jwt.verify(token, config.secret) as UserDto;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setSession(user.expiresIn, token);\r\n\r\n\t\t\t\treturn new User(user.name, user.id);\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\treturn Promise.resolve(null);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async signin(name: string, password: string) {\r\n\t\tpassword = this.encryptPassword(password);\r\n\r\n\t\ttry {\r\n\t\t\tconst { success, token }: AuthResponce = (await axios.post(`${this.domainEndpoint}/signin`, { name, password })).data;\r\n\r\n\t\t\tif ( success ) {\r\n\t\t\t\tlet user: UserDto | null = null;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuser = jwt.verify(token, config.secret) as UserDto;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setSession(user.expiresIn, token);\r\n\r\n\t\t\t\treturn new User(user.name, user.id);\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\treturn Promise.resolve(null);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic logout() {\r\n\t\tlocalStorage.removeItem(LOCAL_STORAGE_KEY);\r\n\t}\r\n\r\n\tpublic authenticate() {\r\n\t\tlet sessionToken = window.localStorage.getItem(LOCAL_STORAGE_KEY);\r\n\t\tif (!sessionToken) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn this.getUserFromSession(sessionToken);\r\n\t}\r\n\r\n\t//TODO:  KILLME !!!\r\n\tpublic async getAllUsers() {\r\n\t\treturn (await axios(`${this.domainEndpoint}api/users`)).data;\r\n\t}\r\n\r\n\tprivate getUserFromSession(sessionToken: string): User | null {\r\n\t\tlet user = null;\r\n\r\n\t\ttry {\r\n\t\t\tuser = jwt.verify(sessionToken, config.secret) as UserDto;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn new User(user.name, user.id);\r\n\t}\r\n\r\n\tprivate setSession(expiresIn: number, token: string) {\r\n\t\t// set the time that the id token will expire at\r\n\t\tthis.expiresAt = expiresIn * 1000 + new Date().getTime();\r\n\r\n\t\tlocalStorage.setItem(LOCAL_STORAGE_KEY, token);\r\n\t}\r\n\r\n\tprivate encryptPassword(password: string) {\r\n\t\treturn password;\r\n\t}\r\n}","import axios from \"axios\";\r\n\r\nimport UserOrder from \"../../domain/user-order\";\r\n\r\nexport default class OrderService {\r\n\tconstructor(private readonly api: string) {\r\n\t\tthis.api = `${api}/order`;\r\n\t}\r\n\r\n\tpublic async getTodayOrders(): Promise<UserOrder[]> {\r\n\t\treturn (await axios.get(`${this.api}/today-orders/`)).data;\r\n\t}\r\n\r\n\tpublic async getSharedTodayOrders(): Promise<UserOrder[]> {\r\n\t\treturn (await axios.get(`${this.api}/shared-today-orders/`)).data;\r\n\t}\r\n\r\n\tpublic orderLunch(userOrder: UserOrder) {\r\n\t\treturn axios.post(`${this.api}/order-lunch/`, userOrder);\r\n\t}\r\n\r\n\tpublic async getWeekOrders(userId: string | null): Promise<UserOrder[]> {\r\n\t\tif (!userId) {\r\n\t\t\treturn []\r\n\t\t}\r\n\r\n\t\treturn (await axios.get(`${this.api}/week-orders/${userId}`)).data;\r\n\t}\r\n}","import bcrypt from \"bcryptjs\";\r\n\r\nclass CryptoService {\r\n\tencodePassword(password: string) {\r\n\t\treturn bcrypt.hash(password, 10);\r\n\t}\r\n}\r\n\r\nexport default CryptoService;\r\n","import axios from \"axios\";\r\n\r\nimport Day from \"../../domain/day\";\r\n\r\nclass CalendarService {\r\n\tconstructor(private api: string) {\r\n\t\tthis.api = api + \"/calendar/\"\r\n\t}\r\n\r\n\tpublic async getDays(): Promise<Day[]> {\r\n\t\tconst url = this.api + \"/next-two-weeks/\";\r\n\t\treturn (await axios.get(url)).data;\r\n\t}\r\n}\r\n\r\nexport default CalendarService;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { configure } from \"mobx\";\nimport { Provider } from \"mobx-react\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport ScrollToTop from \"./components/scroll-to-top\";\nimport App from \"./components/app\";\nimport { createStores } from \"./store\";\nimport { createServices } from \"./services\";\nimport { config } from \"./config\";\nimport \"./vendors/index\";\nimport \"./index.scss\";\n\nconfigure({ enforceActions: \"always\" });\n\nconst services = createServices(`${config.backendDomain}api`);\nconst stores = createStores(services);\n\nconst rootElement = document.getElementById(\"root\");\n\nReactDOM.render(\n\t<Provider {...stores}>\n\t\t<BrowserRouter>\n\t\t\t<ScrollToTop>\n\t\t\t\t<App />\n\t\t\t</ScrollToTop>\n\t\t</BrowserRouter>\n\t</Provider>,\n\trootElement,\n);\n","import MenuService from \"./menu-service\";\r\nimport AuthService from \"./auth-service\";\r\nimport OrderService from \"./order-service\";\r\nimport CryptoService from \"./crypto-service\";\r\nimport CalendarService from \"./calendar-service\";\r\n\r\nexport function createServices(apiEndpoint: string) {\r\n\treturn {\r\n\t\tmenuService: new MenuService(apiEndpoint),\r\n\t\torderService: new OrderService(apiEndpoint),\r\n\t\tauthService: new AuthService(),\r\n\t\tcryptoService: new CryptoService(),\r\n\t\tcalendarService: new CalendarService(apiEndpoint),\r\n\t};\r\n}\r\n","import AppViewModel from \"../models/app\";\r\n\r\nimport CryptoService from \"../services/crypto-service\";\r\nimport MenuService from \"../services/menu-service\";\r\nimport OrderService from \"../services/order-service\";\r\nimport AuthService from \"../services/auth-service\";\r\nimport CalendarService from \"../services/calendar-service\";\r\n\r\nimport HomePageStore from \"../pages/home/store/home-page-store\";\r\nimport OrderPageStore from \"../pages/order/store/order-page-store\";\r\nimport WeekOrderPageStore from \"../pages/week-order/store/week-order-page-store\";\r\nimport LoginPageStore from \"../pages/login/store/store\";\r\nimport MyOrderStore from \"./my-order-store\";\r\nimport IdentityStore from \"./identity-store\";\r\nimport AppStore from \"./app-store\";\r\n\r\ninterface Services {\r\n\tmenuService: MenuService;\r\n\torderService: OrderService;\r\n\tauthService: AuthService;\r\n\tcryptoService: CryptoService;\r\n\tcalendarService: CalendarService;\r\n}\r\n\r\nfunction createStores({ menuService, orderService, authService, cryptoService, calendarService }: Services) {\r\n\tconst appModel = new AppViewModel({ calendarService, menuService, orderService });\r\n\tconst identityStore = new IdentityStore(authService, cryptoService);\r\n\r\n\tconst appStore = new AppStore({ appModel, identityStore });\r\n\r\n\tconst myOrderStore = new MyOrderStore(appModel, appStore);\r\n\tconst homePageStore = new HomePageStore(appStore, appModel);\r\n\tconst orderPageStore = new OrderPageStore(appStore, appModel);\r\n\tconst weekOrderPageStore = new WeekOrderPageStore(appStore, appModel);\r\n\tconst loginPageStore = new LoginPageStore(appStore);\r\n\r\n\treturn { appStore, homePageStore, orderPageStore, weekOrderPageStore, loginPageStore, myOrderStore };\r\n}\r\n\r\nexport { createStores };\r\n"],"sourceRoot":""}